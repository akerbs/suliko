import React, { useState } from "react"
import "./layout.css"
import AppbarAndDrawer from "./appbarAndDrawer"
import Footer from "./footer"
import { ThemeProvider } from "@material-ui/core/styles"
import theme from "./theme"
import CssBaseline from "@material-ui/core/CssBaseline"
import { makeStyles } from "@material-ui/core/styles"
import Container from "@material-ui/core/Container"
import useScrollTrigger from "@material-ui/core/useScrollTrigger"
import Fab from "@material-ui/core/Fab"
import KeyboardArrowUpIcon from "@material-ui/icons/KeyboardArrowUp"
import Zoom from "@material-ui/core/Zoom"
import Typography from "@material-ui/core/Typography"
import Button from "@material-ui/core/Button"
import IconButton from "@material-ui/core/IconButton"
import img1 from "../images/1.jpg"
import { FormHelperText } from "@material-ui/core"
import {
  MuiPickersUtilsProvider,
  TimePicker,
  DatePicker,
} from "@material-ui/pickers"
import { ClockView } from "@material-ui/pickers"
import DateFnsUtils from "@date-io/date-fns"
import { Link } from "gatsby"
import Modal from "@material-ui/core/Modal"

import Timeline from "@material-ui/lab/Timeline"
import TimelineItem from "@material-ui/lab/TimelineItem"
import TimelineSeparator from "@material-ui/lab/TimelineSeparator"
import TimelineConnector from "@material-ui/lab/TimelineConnector"
import TimelineContent from "@material-ui/lab/TimelineContent"
import TimelineDot from "@material-ui/lab/TimelineDot"
import TimelineOppositeContent from "@material-ui/lab/TimelineOppositeContent"
import FastfoodIcon from "@material-ui/icons/Fastfood"
import PeopleIcon from "@material-ui/icons/People"
import EventIcon from "@material-ui/icons/Event"
import PhoneIcon from "@material-ui/icons/Phone"
import AlternateEmailIcon from "@material-ui/icons/AlternateEmail"

import PersonIcon from "@material-ui/icons/Person"
import ScheduleIcon from "@material-ui/icons/Schedule"
import DoneIcon from "@material-ui/icons/Done"
import InputLabel from "@material-ui/core/InputLabel"
import MenuItem from "@material-ui/core/MenuItem"
import FormControl from "@material-ui/core/FormControl"
import Select from "@material-ui/core/Select"
import TextField from "@material-ui/core/TextField"
import Checkbox from "@material-ui/core/Checkbox"

const useStyles = makeStyles(theme => ({
  root: {
    backgroundColor: "rgba(49, 10, 10)",
    backgroundImage: `url(${img1}) `,
    maxWidth: "100%",
    height: "auto",
    color: "white",
    position: "fixed",
    padding: "0px 0px 0px 100px",
    backgroundRepeate: `no-repeat `,
    zIndex: -1,

    backgroundAttachment: "fixed",
    overflow: "hidden",
    backgroundPosition: "center center",

    backgroundSize: "cover",
    // "&:before": {
    //   content: " ",
    //   zIndex: -10,
    // },

    [theme.breakpoints.down("md")]: {
      padding: "80px 80px 0px 80px",
    },
    [theme.breakpoints.down("sm")]: {
      padding: "15px 50px 0px 50px",
    },
    [theme.breakpoints.down("xs")]: {
      // padding: "15px 5px 0px 5px",
      padding: 0,
    },
    // animation: "$sliderBg 50s linear infinite alternate ",
  },

  // "@keyframes sliderBg": {
  //   "0%, 18%": {
  //     backgroundImage: `url(${img1})`,
  //   },
  //   "20%, 38%": {
  //     backgroundImage: `url(${img2})`,
  //   },
  //   "40%, 58%": {
  //     backgroundImage: `url(${img3})`,
  //   },
  //   "60%, 78%": {
  //     backgroundImage: `url(${img4})`,
  //   },
  //   "80%, 100%": {
  //     backgroundImage: `url(${img5})`,
  //   },
  //   // "72%, 81%": {
  //   //   backgroundImage: `url(${img6})`,
  //   // },
  // },

  content: {
    position: "relative",
    overflowX: "hidden",
    // height: "580px",
    maxHeight: " 100vh", //100% view height
    maxWidth: "100vw", // 100% view width
    paddingTop: 50,
    [theme.breakpoints.down("xs")]: {
      padding: 5,
      paddingTop: 20,
      // margin: 0,
    },
  },
  reservierenButton: {
    [theme.breakpoints.down("sm")]: {
      position: "fixed",
      bottom: 5,
      right: 5,
      zIndex: 1,
    },
  },
  main: {
    display: "flex",
    flexDirection: "column",
    alignItems: "flex-start",
    padding: 0,

    background: "rgba(250,250,250, 0.01)",

    [theme.breakpoints.down("sm")]: {
      // padding: "20px 10px",
      marginTop: 0,
    },
    [theme.breakpoints.down("xs")]: {
      padding: "0px 10px",
    },
  },

  main2: {
    marginTop: 10,
    padding: 50,
    background: "rgba(49, 10, 10, 0.75 )",
    [theme.breakpoints.down("sm")]: {
      padding: 10,
      paddingTop: 20,
    },
    [theme.breakpoints.down("xs")]: {
      padding: 5,
      paddingTop: 30,
    },
  },
  // x: {
  //   position: "fixed",
  //   bottom: theme.spacing(2),
  //   right: theme.spacing(2),
  // },
  modalWrapper: {
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
  },
  paper: {
    position: "absolute",
    width: 320,
    // height: 465,
    backgroundColor: theme.palette.background.paper,
    border: "2px solid rgba(133,26,29)",
    boxShadow: theme.shadows[5],
    padding: theme.spacing(0, 0, 1, 0),
    outline: 0,
  },
  timeline: {
    // alignItems: "flex-start",
    // paddingLeft: 0,
    // marginLeft: 0,
    margin: 0,
    padding: 0,
  },

  timelineItem: {
    margin: 0,
    padding: 0,
  },

  formControl: {
    margin: theme.spacing(0),
    minWidth: 185,
  },
}))

// function ScrollTop(props) {
//   const { children, window } = props
//   const classes = useStyles()
//   const trigger = useScrollTrigger({
//     target: window ? window() : undefined,
//     disableHysteresis: true,
//     threshold: 1,
//   })

//   const handleClick = event => {
//     const anchor = (event.target.ownerDocument || document).querySelector(
//       "#back-to-top-anchor"
//     )
//     if (anchor) {
//       anchor.scrollIntoView({ behavior: "smooth", block: "center" })
//     }
//   }
//   return (
//     <Zoom in={trigger}>
//       <div onClick={handleClick} role="presentation" className={classes.x}>
//         {children}
//       </div>
//     </Zoom>
//   )
// }

//////////////////////// Modal ////////////////////////

const Layout = ({ children }, props) => {
  const classes = useStyles()
  const [selectedDate, handleDateChange] = React.useState(new Date())
  const [peopleCount, setpeopleCount] = React.useState("")
  const [checked, setChecked] = React.useState(true)

  ///for Modal///
  const [open, setOpen] = React.useState(false)

  const handleOpen = () => {
    setOpen(true)
  }

  const handleClose = () => {
    setOpen(false)
  }
  const handleChange = event => {
    setpeopleCount(event.target.value)
  }
  // const handleCheckbox = event => {
  //   setChecked(event.target.checked)
  // }

  const modalBody = (
    <div className={classes.paper}>
      <MuiPickersUtilsProvider utils={DateFnsUtils}>
        <Timeline className={classes.timeline}>
          <TimelineItem
            className={classes.timelineItem}
            // style={{ marginBottom: 5 }}
          >
            <TimelineOppositeContent
              style={{ flex: 0 }}
            ></TimelineOppositeContent>
            <TimelineSeparator>
              <TimelineDot color="primary">
                <PeopleIcon />
              </TimelineDot>
              <TimelineConnector />
            </TimelineSeparator>
            <TimelineContent>
              <FormControl className={classes.formControl}>
                <InputLabel id="demo-simple-select-label">People</InputLabel>
                <Select
                  labelId="demo-simple-select-label"
                  id="demo-simple-select"
                  value={peopleCount}
                  onChange={handleChange}
                >
                  <MenuItem value={1}>1</MenuItem>
                  <MenuItem value={2}>2</MenuItem>
                  <MenuItem value={3}>3</MenuItem>
                  <MenuItem value={4}>4</MenuItem>
                  <MenuItem value={5}>5</MenuItem>
                  <MenuItem value={6}>6</MenuItem>
                  <MenuItem value={7}>7</MenuItem>
                  <MenuItem value={8}>8</MenuItem>
                  <MenuItem value={9}>9</MenuItem>
                  <MenuItem value={10}>10</MenuItem>
                  <MenuItem value={11}>11-15</MenuItem>
                  <MenuItem value={16}>16-20</MenuItem>
                  <MenuItem value={20}>20+</MenuItem>
                </Select>
              </FormControl>
            </TimelineContent>
          </TimelineItem>

          <TimelineItem className={classes.timelineItem}>
            <TimelineOppositeContent
              style={{ flex: 0 }}
            ></TimelineOppositeContent>
            <TimelineSeparator>
              <TimelineDot color="primary">
                <EventIcon />
              </TimelineDot>
              <TimelineConnector />
            </TimelineSeparator>
            <TimelineContent>
              <FormControl className={classes.formControl}>
                <DatePicker
                  value={selectedDate}
                  onChange={handleDateChange}
                  style={{ marginTop: 15 }}
                />
              </FormControl>
            </TimelineContent>
          </TimelineItem>

          <TimelineItem className={classes.timelineItem}>
            <TimelineOppositeContent
              style={{ flex: 0 }}
            ></TimelineOppositeContent>
            <TimelineSeparator>
              <TimelineDot color="primary">
                <ScheduleIcon />
              </TimelineDot>
              <TimelineConnector />
            </TimelineSeparator>
            <TimelineContent>
              <FormControl className={classes.formControl}>
                <TimePicker
                  value={selectedDate}
                  onChange={handleDateChange}
                  ampm={false}
                  style={{ marginTop: 15 }}
                />
              </FormControl>
            </TimelineContent>
          </TimelineItem>

          <TimelineItem className={classes.timelineItem}>
            <TimelineOppositeContent
              style={{ flex: 0 }}
            ></TimelineOppositeContent>
            <TimelineSeparator>
              <TimelineDot color="primary">
                <PersonIcon />
              </TimelineDot>
              <TimelineConnector />
            </TimelineSeparator>
            <TimelineContent>
              <FormControl className={classes.formControl}>
                <TextField id="standard-basic" label="Name" />
              </FormControl>
            </TimelineContent>
          </TimelineItem>

          <TimelineItem className={classes.timelineItem}>
            <TimelineOppositeContent
              style={{ flex: 0 }}
            ></TimelineOppositeContent>
            <TimelineSeparator>
              <TimelineDot color="primary">
                <PhoneIcon />
              </TimelineDot>
              <TimelineConnector />
            </TimelineSeparator>
            <TimelineContent>
              <FormControl className={classes.formControl}>
                <TextField id="standard-basic" label="Phone" />
              </FormControl>
            </TimelineContent>
          </TimelineItem>

          <TimelineItem className={classes.timelineItem}>
            <TimelineOppositeContent
              style={{ flex: 0 }}
            ></TimelineOppositeContent>
            <TimelineSeparator>
              <TimelineDot color="primary">
                <AlternateEmailIcon />
              </TimelineDot>
            </TimelineSeparator>
            <TimelineContent>
              <FormControl className={classes.formControl}>
                <TextField id="standard-basic" label="Email" />
              </FormControl>
            </TimelineContent>
          </TimelineItem>
        </Timeline>
      </MuiPickersUtilsProvider>

      <Button
        variant="contained"
        color="primary"
        style={{
          position: "relative",
          left: "50%",
          transform: "translate(-50%, 0)",
        }}
      >
        Reservieren jetzt
      </Button>

      {/* <Checkbox checked={checked} onChange={handleCheckbox} color="primary" />
      <Typography
        variant="caption"
        // align="center"
        style={{
          color: "rgba(133, 26, 29)",
          display: "inline",
          lineHight: 0,
        }}
      >
        Argee to receive news and offers from Suliko
      </Typography> */}
    </div>
  )

  ///end for Modal///
  return (
    <Container className={classes.root}>
      <ThemeProvider theme={theme}>
        <CssBaseline />

        <Container className={classes.content}>
          {/* <div id="back-to-top-anchor" /> */}
          <AppbarAndDrawer />

          <Container maxWidth="md" className={classes.main}>
            <Button
              className={classes.reservierenButton}
              variant="contained"
              color="primary"
              onClick={handleOpen}
            >
              Reservieren
            </Button>
            <Container maxWidth="md" className={classes.main2}>
              {children}
            </Container>
            {/* <ScrollTop {...props}>
              <Fab
                color="secondary"
                size="small"
                aria-label="scroll back to top"
              >
                <KeyboardArrowUpIcon />
              </Fab>
            </ScrollTop> */}
          </Container>

          <Footer />
        </Container>

        <Modal
          className={classes.modalWrapper}
          open={open}
          onClose={handleClose}
          aria-labelledby="simple-modal-title"
          aria-describedby="simple-modal-description"
        >
          {modalBody}
        </Modal>
      </ThemeProvider>
    </Container>
  )
}

export default Layout
